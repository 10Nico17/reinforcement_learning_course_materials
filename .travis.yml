language: python

addons:
  ssh_known_hosts: $UPB_HOST
  apt:
    packages:
    - sshpass
    - texlive
    - texlive-latex3
    - texlive-latex-extra
    - latex-beamer

install:
  - pip install tqdm

cache:
  directories:
    - /tmp/texlive
    - $HOME/.texlive

script:
  - cd lecture_slides
  - travis_wait 15 python build.py  # timeout after 15 mins

deploy:
  - provider: script
    skip_cleanup: true
    script: sshpass -e scp -r built/ $UPB_USER@$UPB_HOST:$UPB_DEPLOY_DIR > /dev/null
    on:
      branch: master

